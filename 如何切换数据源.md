# 如何在两种数据格式之间切换

## 📂 文件说明

### 当前文件（使用Markdown数据）
- `index.html` - 主页面（使用uploaddata.md）
- `script.js` - 主脚本（解析Markdown）
- `uploaddata.md` - 数据文件（Markdown格式）

### 新文件（使用JSON数据）
- `index-json.html` - 测试页面（使用data.json）
- `script-json.js` - JSON脚本（解析JSON）
- `data.json` - 数据文件（JSON格式）

## 🔄 切换方法

### 方法1：保留两个版本（推荐）

**优点**：可以同时保留两种格式，方便对比和迁移

1. **使用Markdown版本**：
   - 访问 `index.html`
   - 数据来自 `uploaddata.md`

2. **使用JSON版本**：
   - 访问 `index-json.html`
   - 数据来自 `data.json`

3. **测试JSON版本**：
   ```bash
   # Windows PowerShell
   python -m http.server 8000
   
   # 然后访问
   http://localhost:8000/index-json.html
   ```

### 方法2：完全切换到JSON格式

**适用场景**：确定要使用JSON格式

1. **备份原文件**：
   ```bash
   # 备份原index.html和script.js
   copy index.html index-md-backup.html
   copy script.js script-md-backup.js
   ```

2. **替换文件**：
   ```bash
   # 将JSON版本替换为主文件
   copy index-json.html index.html
   copy script-json.js script.js
   ```

3. **修改index.html中的引用**：
   打开 `index.html`，将最后一行：
   ```html
   <script src="script-json.js"></script>
   ```
   改为：
   ```html
   <script src="script.js"></script>
   ```

### 方法3：在现有index.html中切换（灵活）

修改 `index.html` 的脚本引用：

**当前（使用Markdown）**：
```html
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="script.js"></script>
```

**切换到JSON**：
```html
<!-- <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> -->
<!-- <script src="script.js"></script> -->
<script src="script-json.js"></script>
```

## 📝 数据迁移步骤

### 从 uploaddata.md 迁移到 data.json

1. **确定分类结构**：
   - 查看 uploaddata.md 中的所有 `### 标题`
   - 规划好父子分类关系

2. **复制数据**：
   ```json
   {
     "title": "从Markdown表格复制的标题",
     "url": "从Markdown表格复制的链接",
     "description": "从Markdown表格复制的说明",
     "logo": ""
   }
   ```

3. **批量处理**（可选）：
   - 使用文本编辑器的查找替换功能
   - 或编写简单的转换脚本

4. **验证JSON格式**：
   - 使用 https://jsonlint.com/ 验证
   - 或在VS Code中检查语法高亮

## 🆕 新数据录入建议

### 如果继续使用Markdown（uploaddata.md）

在相应分类下添加表格行：
```markdown
| 标题 | 链接 | 说明 |
| ---- | ---- | ---- |
| 新项目名称 | https://example.com | 这是说明 |
```

### 如果使用JSON（data.json）

在相应分类的items数组中添加：
```json
{
  "title": "新项目名称",
  "url": "https://example.com",
  "description": "这是说明",
  "logo": ""
}
```

## 💡 推荐方案

### 阶段1：测试期（当前）
- 保留 `index.html` + `uploaddata.md`（原系统）
- 测试 `index-json.html` + `data.json`（新系统）
- 对比两种格式的优缺点

### 阶段2：过渡期
- 新数据添加到 `data.json`
- 旧数据保留在 `uploaddata.md`
- 逐步迁移重要数据

### 阶段3：完全迁移
- 所有数据迁移到 `data.json`
- 将 `index-json.html` 改名为 `index.html`
- 将 `uploaddata.md` 归档

## ⚠️ 注意事项

1. **JSON格式严格**：
   - 每个对象后面要有逗号（最后一个除外）
   - 字符串必须用双引号
   - 不能有多余的逗号

2. **Logo字段**：
   - 可以留空 `"logo": ""`
   - 系统会自动获取favicon

3. **URL格式**：
   - 必须是完整URL（http://或https://）
   - Telegram链接：`https://t.me/username`

4. **备份重要**：
   - 切换前务必备份原文件
   - 可以使用Git进行版本控制

## 🛠️ 问题排查

### JSON加载失败
1. 检查JSON格式是否正确（使用jsonlint.com）
2. 确认文件名是 `data.json`
3. 确认使用HTTP服务器访问（不是直接打开文件）

### 数据显示不正常
1. 打开浏览器开发者工具（F12）
2. 查看Console选项卡的错误信息
3. 检查Network选项卡确认文件加载成功

### 图标不显示
1. 确认Font Awesome CDN链接正常
2. 检查图标类名是否正确
3. 查看浏览器控制台是否有字体加载错误

## 📞 需要帮助？

如果在切换过程中遇到问题，可以：
1. 查看浏览器控制台的错误信息
2. 对比 `index.html` 和 `index-json.html` 的差异
3. 确认所有文件都在正确的位置

